<p style="color: green"><%= notice %></p>

<h1>Budgets</h1>
<%= link_to "New category", new_budget_path, data: { turbo_frame: "modal"}, class:"btn btn-outline-success" %>
<div class="budget-info">
  <div class="side-bar">
    <div class="budgets-menu">
      <h5 class="side-bar-budget">Archive</h5>
      <% @archive_months.each do |month| %>
        <%= link_to budgets_path(archive_month: month), class: "no-underline" do %>
          <div class="side-bar-budget"><%= month.strftime('%B %Y') %></div>
        <% end %>
      <% end %>
    </div>
  </div>

  <div class="budgets">
    <div class="container text-center">
      <div class="row">
        <div class="col my-auto"><strong>Category:</strong></div>
        <div class="col my-auto"><strong>Fact Amount:</strong></div>
        <div class="col my-auto"><strong>Budget Amount:</strong></div>
        <% unless @budget_categories.empty? %>
          <% unless @budget_categories.first[:archive_month] %>
            <div class="col my-auto"><strong>Actions:</strong></div>
          <% end %>
        <% end %>
      </div>

      <% @budget_categories.each do |category| %>
        <div class="budget">
          <div class="row">
            <div class="col my-auto"><%= category[:category] %></div>
            <div class="col my-auto">$<%= number_with_precision(category[:fact_amount], precision: 0) %></div>
            <div class="col my-auto">$<%= number_with_precision(category[:budget_amount], precision: 0) %></div>
            <% unless category[:archive_month] %>
              <div class="col my-auto">
                <%= link_to 'Edit', edit_budget_path(category[:budget_id]), data: { turbo_frame: "modal"}, class: 'btn btn-outline-primary' %>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
